{% extends "base.html" %}

{% block title %}Dataset Details{% endblock title %}
{% block content %}

<div class="container-fluid mt-5">  
    <h1>Dataset: {{ filename }}</h1>
    <div class="table-responsive">
        <table class="table table-striped table-bordered custom-table">
            <thead class="thead-dark">
                <tr>
                    {% for column in columns %}
                        <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody id="table-body">
                {% for row in rows %}
                    <tr class="hidden-row" style="display: none;"> 
                        {% for value in row.values %}
                            <td>{{ value }}</td>
                        {% endfor %}
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="{{ columns|length }}" class="text-center">No data available.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="text-center">
        <button id="load-more" type="button" class="btn btn-primary mt-3">Load more</button>
    </div>
</div>



<script>
    let currentRow = 0;  // Track the currently visible rows
    const rowsToShow = 10;  // Number of rows to show on each click

    // Show the initial rows
    $(document).ready(function () {
        showMoreRows();

        $("#load-more").click(function () {
            showMoreRows();
        });

        function showMoreRows() {
            const hiddenRows = $("#table-body .hidden-row");
            const totalRows = hiddenRows.length;

            // Show the next set of rows
            for (let i = 0; i < rowsToShow && currentRow < totalRows; i++) {
                $(hiddenRows[currentRow]).show();  // Show the row
                currentRow++;  // Move to the next row
            }

            // If no more rows to show, disable the button
            if (currentRow >= totalRows) {
                $("#load-more").prop("disabled", true);
                $("#load-more").text("No more data");
            }
        }
    });
</script>

{% endblock content %}
